"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[744],{744:(C,y,c)=>{c.r(y),c.d(y,{TimelineDemoModule:()=>K});var u=c(6814),v=c(3557),f=c(9862),p=c(5219),e=c(4769),o=c(8814),s=c(981),d=c(707),m=c(9552),T=c(1312);function D(t,n){1&t&&(e.TgZ(0,"tr",23)(1,"td",24)(2,"strong"),e._uU(3,"Product"),e.qZA()(),e.TgZ(4,"td",25)(5,"strong"),e._uU(6,"Serial No"),e.qZA()(),e.TgZ(7,"td",26)(8,"strong"),e._uU(9,"Company"),e.qZA()(),e.TgZ(10,"td",26)(11,"strong"),e._uU(12,"Model"),e.qZA()(),e.TgZ(13,"td",26)(14,"strong"),e._uU(15,"Warranty upto"),e.qZA()(),e.TgZ(16,"td",27)(17,"strong"),e._uU(18,"Price"),e.qZA()(),e.TgZ(19,"td",28)(20,"strong"),e._uU(21,"Edit Product"),e.qZA()()())}function P(t,n){if(1&t){const i=e.EpF();e.TgZ(0,"tr")(1,"td",25),e._uU(2),e.qZA(),e.TgZ(3,"td",25),e._uU(4),e.qZA(),e.TgZ(5,"td",26),e._uU(6),e.qZA(),e.TgZ(7,"td",26),e._uU(8),e.qZA(),e.TgZ(9,"td",26),e._uU(10),e.qZA(),e.TgZ(11,"td",31),e._uU(12),e.ALo(13,"currency"),e.qZA(),e.TgZ(14,"td",32)(15,"button",33),e.NdJ("click",function(){e.CHM(i);const l=e.oxw().$implicit,a=e.oxw();return e.KtG(a.editBill(l))}),e.qZA()()()}if(2&t){const i=e.oxw().$implicit;e.xp6(2),e.Oqu(i.product_name),e.xp6(2),e.Oqu(i.serial_number),e.xp6(2),e.Oqu(i.company_name),e.xp6(2),e.Oqu(i.model_name),e.xp6(2),e.Oqu(i.sels_warranty),e.xp6(2),e.Oqu(e.xi3(13,6,i.price,"INR"))}}function Z(t,n){if(1&t){const i=e.EpF();e.TgZ(0,"tr",34)(1,"td",25),e._uU(2),e.qZA(),e.TgZ(3,"td",25),e._uU(4),e.qZA(),e.TgZ(5,"td",26),e._uU(6),e.qZA(),e.TgZ(7,"td",26),e._uU(8),e.qZA(),e.TgZ(9,"td",26),e._uU(10),e.qZA(),e.TgZ(11,"td",31),e._uU(12),e.ALo(13,"currency"),e.qZA(),e.TgZ(14,"td",32)(15,"button",33),e.NdJ("click",function(){e.CHM(i);const l=e.oxw().$implicit,a=e.oxw();return e.KtG(a.editBill(l))}),e.qZA()()()}if(2&t){const i=e.oxw().$implicit;e.xp6(2),e.Oqu(i.product_name),e.xp6(2),e.Oqu(i.serial_number),e.xp6(2),e.Oqu(i.company_name),e.xp6(2),e.Oqu(i.model_name),e.xp6(2),e.Oqu(i.sels_warranty),e.xp6(2),e.Oqu(e.xi3(13,6,i.price,"INR"))}}function k(t,n){if(1&t&&(e.YNc(0,P,16,9,"tr",29),e.YNc(1,Z,16,9,"tr",30)),2&t){const i=n.$implicit;e.Q6J("ngIf",null==i.exchange_product_id),e.xp6(1),e.Q6J("ngIf",i.exchange_product_id>0)}}function S(t,n){if(1&t){const i=e.EpF();e.TgZ(0,"div",35)(1,"label",36),e._uU(2,"scan BarCode"),e.qZA(),e.TgZ(3,"input",37),e.NdJ("ngModelChange",function(l){e.CHM(i);const a=e.oxw();return e.KtG(a.newProduct=l)})("keyup",function(l){e.CHM(i);const a=e.oxw();return e.KtG(a.searchProduct(l))}),e.qZA()()}if(2&t){const i=e.oxw();e.xp6(3),e.Q6J("ngModel",i.newProduct)}}function M(t,n){if(1&t){const i=e.EpF();e.TgZ(0,"button",38),e.NdJ("click",function(){e.CHM(i);const l=e.oxw();return e.KtG(l.hideDialog())}),e.qZA(),e.TgZ(1,"button",39),e.NdJ("click",function(){e.CHM(i);const l=e.oxw();return e.KtG(l.saveProduct())}),e.qZA()}if(2&t){const i=e.oxw();e.xp6(1),e.Q6J("disabled",!i.stockList.length>0)}}function A(t,n){1&t&&(e.TgZ(0,"div",40),e._UZ(1,"div")(2,"div")(3,"div")(4,"div")(5,"div"),e.qZA())}function w(t,n){1&t&&e._UZ(0,"div",41)}const E=function(){return{width:"550px"}};let I=(()=>{var t;class n{constructor(r,l,a,g,_,h){this.router=r,this.http=l,this.messageService=a,this.confirmationService=g,this.api=_,this.bill=h,this.ListData=[],this.spinner=!1,this.tot_price=0,this.Due=!1,this.productDialog=!1,this.submitted=!1,this.stockList=[],this.id=this.bill.billing_id}ngOnInit(){this.getBill(this.id)}hideDialog(){this.productDialog=!1,this.submitted=!1}getBill(r){this.spinner=!0;const l={billing_id:r},a=this.api.baseUrl,g=localStorage.getItem("token"),_=(new f.WM).set("Authorization",`Bearer ${g}`);this.http.post(a+"/billing/data",l,{headers:_}).subscribe(h=>{console.log(h),h&&(this.spinner=!1,this.data=h,this.CustomerDtls=this.data.customer,this.ListData=this.data.list,"P"==this.ListData[0].payment_flag?(this.Paid=!0,this.Due=!1):(this.Due=!0,this.Paid=!1),this.ListData.length>0&&this.ListData.forEach(G=>{this.tot_price+=Number(G.price)}))},h=>{"401"==h.status&&this.router.navigate(["/"]),console.log(h.status),this.spinner=!1,console.error(h)})}searchProduct(r){if(13===r.keyCode){this.spinner=!0;const l=this.api.baseUrl,a=localStorage.getItem("token"),g=(new f.WM).set("Authorization",`Bearer ${a}`);this.http.get(l+"/stock/stock_product?page=1&search="+r.target.value.toString(),{headers:g}).subscribe(_=>{this.spinner=!1,this.stockApi=_,this.stockListAll=this.stockApi.data,this.stockList=this.stockListAll.data,this.stockList.length>0||this.messageService.add({severity:"error",summary:"Error",detail:"Product dose not match with Stock item",life:3e3})})}}saveProduct(){this.submitted=!0;const r={cust_id:this.replaceProduct.cust_id,bill_id:this.replaceProduct.billing_id,product_barcode:this.replaceProduct.serial_number,new_barcode:this.stockList[0].serial_number};this.spinner=!0;const l=this.api.baseUrl,a=localStorage.getItem("token"),g=(new f.WM).set("Authorization",`Bearer ${a}`);this.http.post(l+"/billing/add_werent_product",r,{headers:g}).subscribe(_=>{console.log(_),this.spinner=!1,this.messageService.add({severity:"success",summary:"Successfully",detail:"Changed Product",life:3e3}),this.hideDialog()},_=>{"401"==_.status&&this.router.navigate(["/"]),console.log(_.status),this.spinner=!1,console.error(_),this.hideDialog(),this.messageService.add({severity:"error",summary:"Error",detail:"While Changing Product",life:3e3})})}editBill(r){this.replaceProduct=null,this.replaceProduct=r,this.productDialog=!0}callPrint(r){const l=document.getElementById(r).innerHTML,a=document.body.innerHTML;document.body.innerHTML=l,window.print(),document.body.innerHTML=a}}return(t=n).\u0275fac=function(r){return new(r||t)(e.Y36(v.F0),e.Y36(f.eN),e.Y36(p.ez),e.Y36(p.YP),e.Y36(o.s),e.Y36(s.M))},t.\u0275cmp=e.Xpm({type:t,selectors:[["ng-component"]],features:[e._Bn([p.ez])],decls:52,vars:13,consts:[[1,"grid"],[1,"col-12"],["id","bill",1,"card"],[1,"container"],[1,"row"],[1,"col-xs-12"],[1,"invoice-title",2,"margin-left","4%"],[1,"row",2,"margin-left","4%"],[1,"col-xs-6"],[1,"col-xs-6","text-right",2,"padding-right","2%"],[1,"field","col-12","md:col-12"],[1,"panel","panel-default"],[1,"panel-heading"],[1,"card","flex","justify-content-center"],[3,"value"],["dt2",""],["pTemplate","header"],["pTemplate","body"],["header","Deposit amount into the customer account",1,"p-fluid",3,"visible","modal","visibleChange"],["pTemplate","content"],["pTemplate","footer"],["class","loader",4,"ngIf"],["class","overlay",4,"ngIf"],[2,"background-color","beige"],[1,"text-left",2,"padding-left","2%"],[1,"text-left"],[1,"text-center"],[1,"text-right",2,"padding-right","2%"],[2,"width","7rem"],[4,"ngIf"],["style","background-color: rgba(248, 189, 189, 0.818);",4,"ngIf"],[1,"text-right"],[2,"text-align","center"],["type","button","pButton","","pRipple","","icon","pi pi-pencil",3,"click"],[2,"background-color","rgba(248, 189, 189, 0.818)"],[1,"field"],["for","name"],["required","","autofocus","","type","text","required","",2,"width","100%","height","39px","border-color","lightgray","border-radius","5px",3,"ngModel","ngModelChange","keyup"],["pButton","","pRipple","","label","Cancel","icon","pi pi-times",1,"p-button-text",3,"click"],["pButton","","pRipple","","label","Save","icon","pi pi-check",1,"p-button-text",3,"disabled","click"],[1,"loader"],[1,"overlay"]],template:function(r,l){1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h2"),e._uU(8),e.qZA()(),e._UZ(9,"hr"),e.TgZ(10,"div",7)(11,"div",8)(12,"address")(13,"strong"),e._uU(14,"Billed To:"),e.qZA(),e._UZ(15,"br"),e.TgZ(16,"strong"),e._uU(17,"Customer Name:"),e.qZA(),e._uU(18),e._UZ(19,"br"),e.TgZ(20,"strong"),e._uU(21,"Mobile Number:"),e.qZA(),e._uU(22),e._UZ(23,"br"),e.TgZ(24,"strong"),e._uU(25,"Address:"),e.qZA(),e._uU(26),e._UZ(27,"br"),e.qZA()(),e.TgZ(28,"div",9)(29,"address")(30,"strong"),e._uU(31,"Billing Date:"),e.qZA(),e._UZ(32,"br"),e._uU(33),e._UZ(34,"br")(35,"br"),e.qZA()()()()(),e.TgZ(36,"div",4)(37,"div",10)(38,"div",11)(39,"div",12)(40,"h3",13)(41,"strong"),e._uU(42,"Purchase summary"),e.qZA()()(),e.TgZ(43,"p-table",14,15),e.YNc(45,D,22,0,"ng-template",16),e.YNc(46,k,2,2,"ng-template",17),e.qZA()()()()()()()(),e.TgZ(47,"p-dialog",18),e.NdJ("visibleChange",function(g){return l.productDialog=g}),e.YNc(48,S,4,1,"ng-template",19),e.YNc(49,M,2,1,"ng-template",20),e.qZA(),e.YNc(50,A,6,0,"div",21),e.YNc(51,w,1,0,"div",22)),2&r&&(e.xp6(8),e.hij("Billing-Id: ",l.ListData[0].billing_id,""),e.xp6(10),e.Oqu(l.CustomerDtls.name),e.xp6(4),e.Oqu(l.CustomerDtls.mobile_no),e.xp6(4),e.Oqu(l.CustomerDtls.adress),e.xp6(7),e.hij(" ",l.ListData[0].billingdate,""),e.xp6(10),e.Q6J("value",l.ListData),e.xp6(4),e.Akn(e.DdM(12,E)),e.Q6J("visible",l.productDialog)("modal",!0),e.xp6(3),e.Q6J("ngIf",l.spinner),e.xp6(1),e.Q6J("ngIf",l.spinner))},dependencies:[u.O5,p.jx,d.Hq,m.iA,T.V,u.H9],styles:["@media screen and (max-width: 960px){  .customized-timeline .p-timeline-event:nth-child(2n){flex-direction:row!important}  .customized-timeline .p-timeline-event:nth-child(2n) .p-timeline-event-content{text-align:left!important}  .customized-timeline .p-timeline-event-opposite{flex:0}  .customized-timeline .p-card{margin-top:1rem}}"]}),n})(),O=(()=>{var t;class n{}return(t=n).\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[v.Bz.forChild([{path:"",component:I}]),v.Bz]}),n})();var x=c(1180);let z=(()=>{var t;class n{}return t=n,(0,x.Z)(n,"\u0275fac",function(r){return new(r||t)}),(0,x.Z)(n,"\u0275mod",e.oAB({type:t})),(0,x.Z)(n,"\u0275inj",e.cJS({imports:[u.ez,p.m8]})),n})(),j=(()=>{var t;class n{}return t=n,(0,x.Z)(n,"\u0275fac",function(r){return new(r||t)}),(0,x.Z)(n,"\u0275mod",e.oAB({type:t})),(0,x.Z)(n,"\u0275inj",e.cJS({imports:[u.ez,p.m8]})),n})();var R=c(9920),W=c(7680),Y=c(3904);let K=(()=>{var t;class n{}return(t=n).\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({providers:[p.YP],imports:[u.ez,z,d.hJ,j,O,m.U$,R.K,W.L,Y.D,T.S]}),n})()},9920:(C,y,c)=>{c.d(y,{I:()=>v,K:()=>f});var u=c(4769);let v=(()=>{class p{constructor(){this._printStyle=[],this.previewOnly=!1,this.useExistingCss=!1,this.printDelay=0,this._styleSheetFile=""}set printStyle(o){for(let s in o)o.hasOwnProperty(s)&&this._printStyle.push((s+JSON.stringify(o[s])).replace(/['"]+/g,""));this.returnStyleValues()}returnStyleValues(){return`<style> ${this._printStyle.join(" ").replace(/,/g,";")} </style>`}set styleSheetFile(o){let s=function(d){return`<link rel="stylesheet" type="text/css" href="${d}">`};if(-1!==o.indexOf(",")){const d=o.split(",");for(let m of d)this._styleSheetFile=this._styleSheetFile+s(m)}else this._styleSheetFile=s(o)}returnStyleSheetLinkTags(){return this._styleSheetFile}getElementTag(o){const s=[],d=document.getElementsByTagName(o);for(let m=0;m<d.length;m++)s.push(d[m].outerHTML);return s.join("\r\n")}getFormData(o){for(var s=0;s<o.length;s++)o[s].defaultValue=o[s].value,o[s].checked&&(o[s].defaultChecked=!0)}getHtmlContents(){let o=document.getElementById(this.printSectionId),s=o.getElementsByTagName("input");this.getFormData(s);let d=o.getElementsByTagName("textarea");return this.getFormData(d),o.innerHTML}print(){let o,s,d="",m="";const T=this.getElementTag("base");this.useExistingCss&&(d=this.getElementTag("style"),m=this.getElementTag("link")),o=this.getHtmlContents(),s=window.open("","_blank","top=0,left=0,height=auto,width=auto"),s.document.open(),s.document.write(`\n      <html>\n        <head>\n          <title>${this.printTitle?this.printTitle:""}</title>\n          ${T}\n          ${this.returnStyleValues()}\n          ${this.returnStyleSheetLinkTags()}\n          ${d}\n          ${m}\n        </head>\n        <body>\n          ${o}\n          <script defer>\n            function triggerPrint(event) {\n              window.removeEventListener('load', triggerPrint, false);\n              ${this.previewOnly?"":`setTimeout(function() {\n                closeWindow(window.print());\n              }, ${this.printDelay});`}\n            }\n            function closeWindow(){\n                window.close();\n            }\n            window.addEventListener('load', triggerPrint, false);\n          <\/script>\n        </body>\n      </html>`),s.document.close()}}return p.\u0275fac=function(o){return new(o||p)},p.\u0275dir=u.lG2({type:p,selectors:[["button","ngxPrint",""]],hostBindings:function(o,s){1&o&&u.NdJ("click",function(){return s.print()})},inputs:{previewOnly:"previewOnly",printSectionId:"printSectionId",printTitle:"printTitle",useExistingCss:"useExistingCss",printDelay:"printDelay",printStyle:"printStyle",styleSheetFile:"styleSheetFile"}}),p})(),f=(()=>{class p{}return p.\u0275fac=function(o){return new(o||p)},p.\u0275mod=u.oAB({type:p}),p.\u0275inj=u.cJS({}),p})()},7680:(C,y,c)=>{c.d(y,{L:()=>e});var u=c(1180),v=c(6814),f=c(4769);let e=(()=>{var o;class s{}return o=s,(0,u.Z)(s,"\u0275fac",function(m){return new(m||o)}),(0,u.Z)(s,"\u0275mod",f.oAB({type:o})),(0,u.Z)(s,"\u0275inj",f.cJS({imports:[v.ez]})),s})()}}]);