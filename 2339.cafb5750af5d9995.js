"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[2339],{2339:(J,h,l)=>{l.r(h),l.d(h,{GraphicalViewModule:()=>F});var m=l(6814),o=l(95),c=l(7398),e=l(4769),v=l(8814);let _=(()=>{var i;class s{constructor(t,a){this.api=t,this.datePipe=a,this.device=[],this.filtered_device=[],this.md_temparature=[],this.md_solar_radiation=[],this.md_atm_pressure=[],this.md_humidity=[],this.md_wind_speed=[],this.md_wind_direction=[],this.md_rainfall=[],this.device_form=new o.cw({device:new o.NI(null)}),this.graph_date_form=new o.cw({temparature:new o.cw({start_date:new o.NI(new Date)}),rainfall:new o.cw({start_date:new o.NI(new Date)}),atm_pressure:new o.cw({start_date:new o.NI(new Date)}),solar_radiation:new o.cw({start_date:new o.NI(new Date)}),humidity:new o.cw({start_date:new o.NI(new Date)}),wind_speed:new o.cw({start_date:new o.NI(new Date)}),wind_dir:new o.cw({start_date:new o.NI(new Date)})}),this.getDeviceList=()=>{const r=Number(localStorage.getItem("c_id"));this.api.call_api(1,"client/devices/list",{client_id:r}).pipe((0,c.U)(d=>d.data)).subscribe(d=>{this.device=d,this.device_form.get("device").setValue(d[0]),setTimeout(()=>{this.call_api_for_fillup_data_in_chart()},1e3)})},this.call_api_for_fillup_data_in_chart=()=>{this.get_temparature_data(this.graph_date_form.get(["temparature","start_date"]).value),this.get_solar_radiation_data(this.graph_date_form.get(["solar_radiation","start_date"]).value),this.get_rainfall_data(this.graph_date_form.get(["rainfall","start_date"]).value),this.get_atm_pressure_data(this.graph_date_form.get(["atm_pressure","start_date"]).value),this.get_humidity_data(this.graph_date_form.get(["humidity","start_date"]).value),this.get_wind_speed_data(this.graph_date_form.get(["wind_speed","start_date"]).value),this.get_wind_direction_data(this.graph_date_form.get(["wind_dir","start_date"]).value)}}ngOnInit(){this.getDeviceList()}filterDevice(t){this.filtered_device=[];const a=t.query;this.filtered_device=this.device.filter(r=>0==r.device.toLowerCase().indexOf(a.toLowerCase()))}ngAfterViewInit(){this.graph_date_form.get(["temparature","start_date"]).valueChanges.subscribe(t=>{this.get_temparature_data(t)}),this.graph_date_form.get(["rainfall","start_date"]).valueChanges.subscribe(t=>{this.get_rainfall_data(t)}),this.graph_date_form.get(["atm_pressure","start_date"]).valueChanges.subscribe(t=>{this.get_atm_pressure_data(t)}),this.graph_date_form.get(["solar_radiation","start_date"]).valueChanges.subscribe(t=>{this.get_solar_radiation_data(t)}),this.graph_date_form.get(["humidity","start_date"]).valueChanges.subscribe(t=>{this.get_humidity_data(t)}),this.graph_date_form.get(["wind_speed","start_date"]).valueChanges.subscribe(t=>{this.get_wind_speed_data(t)}),this.graph_date_form.get(["wind_dir","start_date"]).valueChanges.subscribe(t=>{this.get_wind_direction_data(t)})}get_payload(t){return new Promise((a,r)=>{if(this.device_form.value.device){const d={...this.device_form.value.device,start_date:this.datePipe.transform(t,"YYYY-MM-dd")};try{a(d)}catch{r(null)}}else r(null)})}setDevice(){console.log("sss"),this.call_api_for_fillup_data_in_chart()}get_temparature_data(t){this.get_payload(t).then(a=>{this.api.call_api(1,"client/devices/graphical_view/temperature",a).pipe((0,c.U)(r=>r.data)).subscribe(r=>{this.md_temparature=r})},a=>{})}get_solar_radiation_data(t){this.get_payload(t).then(a=>{this.api.call_api(1,"client/devices/graphical_view/solar_radiation",a).pipe((0,c.U)(r=>r.data)).subscribe(r=>{this.md_solar_radiation=r})},a=>{})}get_rainfall_data(t){this.get_payload(t).then(a=>{this.api.call_api(1,"client/devices/graphical_view/rainfall",a).pipe((0,c.U)(r=>r.data)).subscribe(r=>{this.md_rainfall=r})},a=>{})}get_atm_pressure_data(t){this.get_payload(t).then(a=>{this.api.call_api(1,"client/devices/graphical_view/atm_pressure",a).pipe((0,c.U)(r=>r.data)).subscribe(r=>{this.md_atm_pressure=r})},a=>{})}get_humidity_data(t){this.get_payload(t).then(a=>{this.api.call_api(1,"client/devices/graphical_view/humidity",a).pipe((0,c.U)(r=>r.data)).subscribe(r=>{this.md_humidity=r})},a=>{})}get_wind_direction_data(t){this.get_payload(t).then(a=>{this.api.call_api(1,"client/devices/graphical_view/wind_direction",a).pipe((0,c.U)(r=>r.data)).subscribe(r=>{this.md_wind_direction=r})},a=>{})}get_wind_speed_data(t){this.get_payload(t).then(a=>{this.api.call_api(1,"client/devices/graphical_view/wind_speed",a).pipe((0,c.U)(r=>r.data)).subscribe(r=>{this.md_wind_speed=r})},a=>{})}}return(i=s).\u0275fac=function(t){return new(t||i)(e.Y36(v.s),e.Y36(m.uU))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-graphical-view"]],decls:58,vars:45,consts:[[1,"card","flex","justify-content-end","py-2","px-1","rounded-sm"],[3,"formGroup"],["formControlName","device","placeholder","Select a device","field","device",3,"suggestions","dropdown","completeMethod","onSelect"],[1,"grid"],[1,"col-12"],[3,"cardTitle","cardSubTitle"],["form",""],["formGroupName","temparature"],["formControlName","start_date"],["content","",1,"px-1","w-full"],[3,"chartDT"],["formGroupName","rainfall"],["formGroupName","atm_pressure"],[1,"col-6"],["formGroupName","solar_radiation"],["formGroupName","humidity"],["formGroupName","wind_speed"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"form",1)(2,"p-autoComplete",2),e.NdJ("completeMethod",function(d){return a.filterDevice(d)})("onSelect",function(){return a.setDevice()}),e.qZA()()(),e.TgZ(3,"div",3)(4,"div",4)(5,"chart-content-holder",5)(6,"div",6)(7,"form",1)(8,"div",7),e._UZ(9,"date-calendar",8),e.qZA()()(),e.TgZ(10,"div",9),e._UZ(11,"apex-chart-core",10),e.ALo(12,"chartDTFormater"),e.qZA()()(),e.TgZ(13,"div",4)(14,"chart-content-holder",5)(15,"div",6)(16,"form",1)(17,"div",11),e._UZ(18,"date-calendar",8),e.qZA()()(),e.TgZ(19,"div",9),e._UZ(20,"apex-chart-core",10),e.ALo(21,"chartDTFormater"),e.qZA()()(),e.TgZ(22,"div",4)(23,"chart-content-holder",5)(24,"div",6)(25,"form",1)(26,"div",12),e._UZ(27,"date-calendar",8),e.qZA()()(),e.TgZ(28,"div",9),e._UZ(29,"apex-chart-core",10),e.ALo(30,"chartDTFormater"),e.qZA()()(),e.TgZ(31,"div",13)(32,"chart-content-holder",5)(33,"div",6)(34,"form",1)(35,"div",14),e._UZ(36,"date-calendar",8),e.qZA()()(),e.TgZ(37,"div",9),e._UZ(38,"apex-chart-core",10),e.ALo(39,"chartDTFormater"),e.qZA()()(),e.TgZ(40,"div",13)(41,"chart-content-holder",5)(42,"div",6)(43,"form",1)(44,"div",15),e._UZ(45,"date-calendar",8),e.qZA()()(),e.TgZ(46,"div",9),e._UZ(47,"apex-chart-core",10),e.ALo(48,"chartDTFormater"),e.qZA()()(),e.TgZ(49,"div",4)(50,"chart-content-holder",5)(51,"div",6)(52,"form",1)(53,"div",16),e._UZ(54,"date-calendar",8),e.qZA()()(),e.TgZ(55,"div",9),e._UZ(56,"apex-chart-core",10),e.ALo(57,"chartDTFormater"),e.qZA()()()()),2&t&&(e.xp6(1),e.Q6J("formGroup",a.device_form),e.xp6(1),e.Q6J("suggestions",a.filtered_device)("dropdown",!0),e.xp6(3),e.Q6J("cardTitle","Temperature")("cardSubTitle","Temperature, measure of hotness or coldness "),e.xp6(2),e.Q6J("formGroup",a.graph_date_form),e.xp6(4),e.Q6J("chartDT",e.xi3(12,27,a.md_temparature,"temperature")),e.xp6(3),e.Q6J("cardTitle","Rainfall")("cardSubTitle","Temperature, measure of hotness or coldness "),e.xp6(2),e.Q6J("formGroup",a.graph_date_form),e.xp6(4),e.Q6J("chartDT",e.xi3(21,30,a.md_rainfall,"rainfall")),e.xp6(3),e.Q6J("cardTitle","Atm Pressure")("cardSubTitle","Temperature, measure of hotness or coldness "),e.xp6(2),e.Q6J("formGroup",a.graph_date_form),e.xp6(4),e.Q6J("chartDT",e.xi3(30,33,a.md_atm_pressure,"atm_pressure")),e.xp6(3),e.Q6J("cardTitle","Solar Radiation")("cardSubTitle","Temperature, measure of hotness or coldness "),e.xp6(2),e.Q6J("formGroup",a.graph_date_form),e.xp6(4),e.Q6J("chartDT",e.xi3(39,36,a.md_solar_radiation,"solar_radiation")),e.xp6(3),e.Q6J("cardTitle","Humidity")("cardSubTitle","Temperature, measure of hotness or coldness "),e.xp6(2),e.Q6J("formGroup",a.graph_date_form),e.xp6(4),e.Q6J("chartDT",e.xi3(48,39,a.md_humidity,"humidity")),e.xp6(3),e.Q6J("cardTitle","Wind Speed")("cardSubTitle","Temperature, measure of hotness or coldness "),e.xp6(2),e.Q6J("formGroup",a.graph_date_form),e.xp6(4),e.Q6J("chartDT",e.xi3(57,42,a.md_wind_speed,"wind_speed")))},styles:[".card[_ngcontent-%COMP%]{border-radius:5px}"]}),s})();var C=l(3557),u=l(7327),y=l(5219);function T(i,s){}const w=[[["","form",""]],[["","content",""]]],b=function(i){return{"flex align-items-center justify-content-start text-lg":i}},S=function(i){return{"pl-2 text-lg":i}},A=["[form]","[content]"];let D=(()=>{var i;class s{constructor(){this.cardTitle="",this.cardSubTitle=""}}return(i=s).\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["chart-content-holder"]],inputs:{cardTitle:"cardTitle",cardSubTitle:"cardSubTitle"},ngContentSelectors:A,decls:12,vars:8,consts:[[1,"card","p-1"],[1,"field","grid","px-1","border-bottom"],[1,"col-4","md:col-4","mb-2","mt-2","lg:col-7","md:mb-0",3,"ngClass"],[1,"cardTitle",3,"ngClass"],[1,"cardSubTitle"],[1,"col-8","md:col-8","mb-2","mt-2","lg:col-5","md:mb-0","flex","align-items-center","justify-content-end"],["pTemplate","footer"]],template:function(t,a){1&t&&(e.F$t(w),e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"p",3),e._uU(4),e.qZA(),e.TgZ(5,"span",4),e._uU(6),e.qZA()(),e.TgZ(7,"div",5),e.Hsn(8),e.qZA()(),e.TgZ(9,"div"),e.Hsn(10,1),e.qZA(),e.YNc(11,T,0,0,"ng-template",6),e.qZA()),2&t&&(e.xp6(2),e.Q6J("ngClass",e.VKq(4,b,!a.cardSubTitle)),e.xp6(1),e.Q6J("ngClass",e.VKq(6,S,!a.cardSubTitle)),e.xp6(1),e.Oqu(a.cardTitle),e.xp6(2),e.hij(" ",a.cardSubTitle?a.cardSubTitle:""," "))},dependencies:[m.mk,y.jx],styles:[".cardTitle[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:500;margin-bottom:0rem;font-size:14px}.cardSubTitle[_ngcontent-%COMP%]{font-weight:400;margin-bottom:.5rem;color:#64748b;font-size:10px}.card[_ngcontent-%COMP%]{border-radius:5px}"]}),s})();var f=l(6760);let U=(()=>{var i;class s{constructor(t){this.ngControl=t,t.valueAccessor=this}writeValue(t){}registerOnChange(t){}registerOnTouched(t){}setDisabledState(t){}}return(i=s).\u0275fac=function(t){return new(t||i)(e.Y36(o.a5,2))},i.\u0275cmp=e.Xpm({type:i,selectors:[["date-calendar"]],decls:1,vars:3,consts:[["dateFormat","dd-mm-yy","inputId","start_date",3,"formControl","appendTo","showIcon"]],template:function(t,a){1&t&&e._UZ(0,"p-calendar",0),2&t&&e.Q6J("formControl",a.ngControl.control)("appendTo","body")("showIcon",!0)},dependencies:[o.JJ,o.oH,f.f]}),s})();var g=l(6903);const Z=["chart"];let x=(()=>{var i;class s{get chartDT(){return this.__chartDT}set chartDT(t){this.__chartDT=t,this.series=t.length>0?t:[],this.initChartData()}constructor(){this.__chartDT=[],this.fill={type:["gradient","solid","solid"],colors:["#4338CA","#e20808"],gradient:{shadeIntensity:1,opacityFrom:.7,opacityTo:.9,stops:[0,90,100]}},this.series=[],this.stroke={curve:["straight","smooth","monotoneCubic","stepline"],width:[2,2],colors:["#4338CA","#e20808"]},this.dataLabels={style:{fontSize:"20"}},this.markers={colors:["#4338CA","#e20808"]},this.grid={show:!1},this.legend={fontFamily:'Inter, ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji',fontSize:"10",fontWeight:600,position:"bottom",labels:{colors:["#4338CA","#e20808"],useSeriesColors:!1},markers:{fillColors:["#4338CA","#e20808"]},itemMargin:{horizontal:10,vertical:5}}}ngOnInit(){}initChartData(){this.chart_dtls={width:"100%",type:"line",stacked:!1,height:350,toolbar:{show:!1}},this.dataLabels={enabled:!1},this.title={text:"",align:"center"},this.yaxis={crosshairs:{show:!0},labels:{style:{colors:"gray",fontSize:"10",fontWeight:600,fontFamily:'Inter, ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji'}},title:{text:"",style:{fontSize:"15",fontWeight:600,fontFamily:'Inter, ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji'}}},this.xaxis={axisTicks:{show:!0},crosshairs:{show:!0},type:"datetime",labels:{format:"HH:mm",datetimeUTC:!1,style:{colors:"gray",fontSize:"10",fontWeight:600,fontFamily:'Inter, ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji'}},tooltip:{style:{fontFamily:'Inter, ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji',fontSize:"10"}}},this.toolTip={style:{fontSize:"8",fontFamily:'Inter, ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji'},marker:{fillColors:["#4338CA","#e20808"]},fixed:{enabled:!1,position:"topRight"},x:{show:!0,format:"dd/MM/yyyy HH:mm"},onDatasetHover:{highlightDataSeries:!0}}}}return(i=s).\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["apex-chart-core"]],viewQuery:function(t,a){if(1&t&&e.Gf(Z,5),2&t){let r;e.iGM(r=e.CRH())&&(a.chart=r.first)}},inputs:{chartDT:"chartDT"},decls:1,vars:13,consts:[[3,"series","chart","xaxis","stroke","colors","dataLabels","legend","markers","grid","yaxis","title","tooltip","responsive"]],template:function(t,a){1&t&&e._UZ(0,"apx-chart",0),2&t&&e.Q6J("series",a.series)("chart",a.chart_dtls)("xaxis",a.xaxis)("stroke",a.stroke)("colors",a.colors)("dataLabels",a.dataLabels)("legend",a.legend)("markers",a.markers)("grid",a.grid)("yaxis",a.yaxis)("title",a.title)("tooltip",a.toolTip)("responsive",a.responsive)},dependencies:[g.x]}),s})(),I=(()=>{var i;class s{constructor(){this.getOthersData=(t,a)=>[{name:a.replace("_"," ").toUpperCase(),data:t.reverse().map(d=>[new Date(d.date_time).getTime(),d[a]])}]}transform(t,...a){return"rainfall"===a[0]?this.getRainfallData(t):this.getOthersData(t,a[0])}getRainfallData(t){return[{name:"RAINFALL",data:t.map(p=>[new Date(p.date_time).getTime(),p.rainfall])},{name:"CUMMULATIVE RAINFALL",data:t.map(p=>[new Date(p.date_time).getTime(),p.rainfall_cumulative])}]}}return(i=s).\u0275fac=function(t){return new(t||i)},i.\u0275pipe=e.Yjl({name:"chartDTFormater",type:i,pure:!0}),s})();const N=[{path:"",component:_}];let F=(()=>{var i;class s{}return(i=s).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[m.uU],imports:[m.ez,C.Bz.forChild(N),o.u5,o.UX,u.WN,f._8,g.X]}),s})();e.B6R(_,function(){return[o._Y,o.JJ,o.JL,o.sg,o.u,o.x0,u.Qc,D,U,x]},function(){return[I]})}}]);